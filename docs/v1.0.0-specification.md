# そっとノート v1.0.0 リリース仕様書

## 📅 リリース情報
- **バージョン**: 1.0.0
- **リリース日**: 2025年6月12日
- **開発期間**: 初期開発完了
- **ステータス**: 本番リリース準備完了

## 🎯 アプリ概要

**そっとノート**は、日々の感情を記録し、AIアシスタント「そっとさん」が優しく寄り添ってくれるウェルネスジャーナリングアプリです。
プライベートで安全な環境で、自分の気持ちと向き合い、心の健康をサポートします。

### コンセプト
- **感情の見える化**: 日々の気持ちを記録し、パターンを把握
- **AI による共感**: そっとさんが感情に寄り添う温かい返信を提供
- **継続的なサポート**: 呼吸法やタグ管理で日常的なセルフケア

## 🚀 主要機能一覧

### 1. ジャーナリング機能
**概要**: 日々の感情や出来事を自由に記録
- ✅ **新規作成・編集・削除**: 1500文字以内でのフリーライティング
- ✅ **リアルタイム自動保存**: 入力中のデータ保護
- ✅ **日時自動記録**: 作成日時の自動設定
- ✅ **プライベート記録**: 自分だけが閲覧可能

### 2. タグシステム
**概要**: エントリーの分類と感情の整理
- ✅ **自動タグ抽出**: ハッシュタグ（#感謝、#不安など）の自動認識
- ✅ **手動タグ追加**: 後からタグを追加・編集
- ✅ **ベースタグ設定**: よく使うタグの事前設定
- ✅ **タグ統計表示**: 使用回数・最終使用日の可視化
- ✅ **検索・フィルタリング**: タグによるエントリー絞り込み
- ✅ **ソート機能**: 使用回数・最近使用・あいうえお順

### 3. AIアシスタント「そっとさん」
**概要**: 感情に寄り添うAI相談相手
- ✅ **パーソナライズ回答**: ユーザー名を使った親しみやすい応答
- ✅ **感情共感**: GPT-3.5-turboによる温かい返信
- ✅ **月5回制限**: 一般ユーザーは月5回まで利用可能
- ✅ **管理者無制限**: 管理者ユーザーは回数制限なし
- ✅ **使用回数表示**: ヘッダーとボタン近くで残回数確認
- ✅ **既存返信保護**: 一般ユーザーは1ジャーナルにつき1回のみ

### 4. データ可視化
**概要**: 記録の継続状況を視覚的に確認
- ✅ **4週間アクティビティ**: GitHubスタイルのカレンダー表示
- ✅ **記録日のハイライト**: ジャーナル作成日の可視化
- ✅ **継続性の把握**: 記録習慣の振り返り

### 5. 深呼吸ガイド
**概要**: ストレス軽減のための呼吸エクササイズ
- ✅ **カスタマイズ設定**: 吸う・止める・吐く時間の調整（2-10秒）
- ✅ **サイクル設定**: 繰り返し回数の指定（1-20回）
- ✅ **視覚的ガイド**: 呼吸に合わせた円の拡縮アニメーション
- ✅ **時間帯別メッセージ**: 完了時の時間に応じたメッセージ
- ✅ **設定保存**: ユーザー設定の永続化

### 6. シェア機能
**概要**: そっとさんからのメッセージの共有
- ✅ **画像生成**: html2canvasによるシェア用画像作成
- ✅ **SNS連携**: Twitter、Facebook、LINEでの共有
- ✅ **美しいデザイン**: ウェルネステーマでのカード表示

### 7. ユーザー管理・設定
**概要**: アカウント管理と個人設定
- ✅ **Google OAuth認証**: セキュアなログイン
- ✅ **プロフィール設定**: 表示名の変更
- ✅ **ベースタグ管理**: よく使うタグの事前設定
- ✅ **データ管理**: 全ジャーナル削除機能
- ✅ **フィードバック送信**: サポートへの連絡機能

## 🏗️ 技術仕様

### フロントエンド
- **フレームワーク**: Remix (React ベース)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS（ウェルネステーマ）
- **状態管理**: Zustand + Immer
- **UI通知**: Sonner
- **アイコン**: Lucide React

### バックエンド・データベース
- **認証・データベース**: Supabase (PostgreSQL)
- **認証方式**: Google OAuth + Supabase Auth
- **AIサービス**: OpenAI API (GPT-3.5-turbo)
- **画像処理**: html2canvas

### セキュリティ
- **Row Level Security (RLS)**: 全テーブルで有効化
- **データ分離**: ユーザーごとの完全なデータ分離
- **環境変数管理**: 機密情報の適切な管理
- **HTTPS**: 全通信の暗号化

### パフォーマンス
- **キャッシュシステム**: ユーザーデータの効率的管理
- **リアルタイム更新**: Supabase Realtimeによる即時反映
- **遅延ローディング**: 必要に応じたコンポーネント読み込み
- **レスポンシブ対応**: Mobile-firstデザイン

## 📊 データベース設計

### テーブル構成

#### profiles テーブル
```sql
CREATE TABLE profiles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID UNIQUE REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  role TEXT DEFAULT 'free' CHECK (role IN ('free', 'admin')),
  base_tags TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

#### journals テーブル
```sql
CREATE TABLE journals (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  mood TEXT,
  tags TEXT,
  timestamp BIGINT NOT NULL,
  date TEXT NOT NULL,
  has_ai_reply BOOLEAN DEFAULT false,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

#### ai_replies テーブル
```sql
CREATE TABLE ai_replies (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  journal_id UUID REFERENCES journals(id) ON DELETE CASCADE,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  model TEXT DEFAULT 'gpt-3.5-turbo',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

## 🎨 UI/UXデザイン

### デザインシステム
- **カラーパレット**: ウェルネステーマ（柔らかい緑と青を基調）
- **タイポグラフィ**: Zen Kaku Gothic New（日本語最適化）
- **レイアウト**: Mobile-firstレスポンシブデザイン
- **アニメーション**: CSS transitionsによる滑らかな動作

### 主要画面構成
1. **メイン画面**: ジャーナル一覧 + アクティビティビュー
2. **ジャーナル画面**: 作成・編集・閲覧統合インターフェース
3. **深呼吸ガイド**: フルスクリーンの没入体験
4. **タグ管理**: 検索・統計・整理機能
5. **設定画面**: プロフィール・データ・フィードバック

### ナビゲーション
- **ヘッダー**: ユーザーメニュー、AI使用回数表示
- **ボトムナビ**: ホーム・ノート・タグ（モバイル）
- **プルトゥリフレッシュ**: タッチでデータ更新

## 🔐 ユーザーロール・権限

### 一般ユーザー (free)
- ✅ 全ジャーナル機能の利用
- ✅ タグシステムの完全利用
- ✅ 深呼吸ガイドの利用
- ✅ そっとさんへの質問（月5回まで）
- ✅ シェア機能の利用

### 管理者ユーザー (admin)
- ✅ 一般ユーザーの全機能
- ✅ そっとさんへの無制限質問
- ✅ 既存AI返信の更新可能
- ✅ 特別権限での機能アクセス

## 📈 利用制限・仕様

### そっとさん利用制限
- **一般ユーザー**: 月5回まで
- **管理者**: 無制限
- **制限リセット**: 毎月1日0:00に自動リセット
- **重複防止**: 同一ジャーナルに複数回答不可（管理者除く）

### ジャーナル仕様
- **文字数制限**: 1500文字
- **保存頻度**: リアルタイム自動保存
- **削除**: 論理削除（データベースから完全削除）

### タグシステム
- **自動抽出**: #で始まる文字列を自動認識
- **手動追加**: カンマ区切りでの追加
- **ベースタグ**: 設定画面でのよく使うタグ設定

## 🚦 パフォーマンス仕様

### 応答時間目標
- **ページ読み込み**: 2秒以内
- **ジャーナル保存**: 1秒以内
- **AI返信生成**: 10秒以内
- **画面遷移**: 0.5秒以内

### データ容量
- **ジャーナル1件**: 最大1500文字（約3KB）
- **AI返信**: 最大500トークン（約1KB）
- **画像キャッシュ**: 最大10MB

## 🔧 開発・運用

### 開発環境
```bash
# 必要なコマンド
yarn install    # 依存関係インストール
yarn dev        # 開発サーバー起動
yarn build      # 本番ビルド
yarn typecheck  # 型チェック
yarn lint       # コード品質チェック
```

### 環境変数
```bash
PUBLIC_SUPABASE_URL=        # Supabase プロジェクトURL
PUBLIC_SUPABASE_ANON_KEY=   # Supabase 公開キー
SUPABASE_SERVICE_ROLE_KEY=  # Supabase サービスロールキー
OPENAI_API_KEY=             # OpenAI APIキー
PROMPT_SOTTO_MESSAGE=       # そっとさんのシステムプロンプト
```

### デプロイ仕様
- **ホスティング**: Vercel（予定）
- **ドメイン**: 未定
- **SSL**: 自動取得・更新
- **CDN**: Vercel Edge Network

## 📋 リリース準備チェックリスト

### 機能テスト
- ✅ ユーザー認証（Google OAuth）
- ✅ ジャーナル作成・編集・削除
- ✅ AI機能（そっとさん）
- ✅ タグシステム
- ✅ 深呼吸ガイド
- ✅ データ可視化
- ✅ シェア機能
- ✅ 設定・プロフィール管理

### 品質チェック
- ✅ TypeScript型チェック完了
- ✅ ESLintコード品質チェック完了
- ✅ レスポンシブデザイン確認
- ✅ ブラウザ互換性テスト
- ✅ セキュリティチェック

### ドキュメント
- ✅ README.md更新
- ✅ API仕様書作成
- ✅ ユーザーガイド作成（予定）
- ✅ 開発者ドキュメント完備

## 🎉 リリース後の展望

### v1.1.0 予定機能
- PWA対応（オフライン機能）
- 週次・月次レポート機能
- より詳細な感情分析
- エクスポート機能

### v1.2.0 予定機能
- そっとポイントシステム
- 習慣トラッキング
- コミュニティ機能（オプション）
- 多言語対応

## 📞 サポート・フィードバック

v1.0.0リリース後は、アプリ内のフィードバック機能またはGitHubのIssuesでサポートを提供予定。

---

**そっとノート v1.0.0** - あなたの心に寄り添うジャーナリングアプリ  
© 2025 そっとノート開発チーム